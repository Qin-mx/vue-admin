webpackJsonp([19],{"3EzS":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=i("woOf"),a=i.n(l),s=i("OVQD"),n=i("0xDb"),o={data:function(){return{list:null,listLoading:!0,listQuery:{},sortOptions:[{label:"大到小",key:"+id"},{label:"小到大",key:"-id"}],title:"",checkList:[],dialogFormVisible:!1,formLabelWidth:"70px",form:{id:void 0,title:"",status:"published",pageviews:null,author:""},statusarr:["published","draft","deleted"],rules:{title:[{required:!0,message:"标题必填",trigger:"change"}],author:[{required:!0,message:"作者必填",trigger:"change"}],pageviews:[{type:"number",message:"必须是数字"}]},dialogStatus:"",dialogIndex:""}},filters:{statusFilter:function(t){return{published:"success",draft:"gray",deleted:"danger"}[t]}},created:function(){this.fetchData()},watch:{list:function(){return this.list}},methods:{fetchData:function(){var t=this;this.listLoading=!0,Object(s.a)(this.listQuery).then(function(e){t.list=e.data.items,t.listLoading=!1})},getList:function(){this.listQuery.title=this.title,this.fetchData()},deleteRow:function(t){var e=this.list.indexOf(t);this.list.splice(e,1)},handleModifyStatus:function(t,e){t.status=e,this.$message({type:"success",message:"操作成功"})},handleDownload:function(){var t=this;this.downloadLoading=!0,i.e(34).then(i.bind(null,"zWO4")).then(function(e){var i=t.list,l=t.formatJson(["id","title","author","status","string","pageviews"],i);e.export_json_to_excel(["Id","标题","作者","状态","星级","页数"],l,t.filename),t.downloadLoading=!1})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"timestamp"===t?Object(n.a)(e[t]):e[t]})})},handleUpdate:function(t){var e=this;this.dialogFormVisible=!0,this.form=a()({},t),this.dialogStatus="update",this.$nextTick(function(){e.$refs.dataForm.clearValidate()}),this.dialogIndex=this.list.indexOf(t)},updateData:function(){this.list.splice(this.dialogIndex,1),this.list.splice(this.dialogIndex,0,this.form),this.dialogFormVisible=!1,this.$notify({title:"更新提示",message:"更新成功",type:"success"})},handleCreate:function(){var t=this;this.resetform(),this.dialogFormVisible=!0,this.dialogStatus="create",this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},createData:function(){this.list.unshift(this.form),this.dialogFormVisible=!1,this.$notify({title:"添加提示",message:"添加成功",type:"success"})},resetform:function(){this.form={id:void 0,title:"",status:"",pageviews:"",author:""}}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-row",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"标题"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.getList(e)}},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),i("el-select",{staticClass:"filter-item",attrs:{clearable:"",placeholder:"id排序"},model:{value:t.listQuery.sort,callback:function(e){t.$set(t.listQuery,"sort",e)},expression:"listQuery.sort"}},t._l(t.sortOptions,function(t){return i("el-option",{key:t.key,attrs:{label:t.label,value:t.key}})})),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},nativeOn:{click:function(e){t.getList(e)}}},[t._v("搜索")]),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},nativeOn:{click:function(e){t.handleCreate(e)}}},[t._v("添加")]),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-download"},nativeOn:{click:function(e){t.handleDownload(e)}}},[t._v("导出")]),t._v(" "),i("el-checkbox-group",{staticClass:"filter-item",staticStyle:{"margin-left":"15px"},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},[i("el-checkbox",{attrs:{label:"地址"}})],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.$index)+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.title)+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"作者",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.author))])]}}])}),t._v(" "),t._l(t.checkList,function(e){return i("el-table-column",{key:e,attrs:{"class-name":"status-col",label:e},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.address)+"\n      ")]}}])})}),t._v(" "),i("el-table-column",{attrs:{label:"页数",width:"110",align:"center","class-name":"fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.pageviews)+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{"class-name":"status-col",label:"状态",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:t._f("statusFilter")(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),t._v(" "),i("el-table-column",{attrs:{"class-name":"status-col",label:"星级",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.string)+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"created_at",label:"操作","class-name":"fixed-width small-padding"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(i){t.handleUpdate(e.row)}}},[t._v("编辑")]),t._v(" "),"published"!=e.row.status?i("el-button",{attrs:{type:"success",size:"small"},nativeOn:{click:function(i){t.handleModifyStatus(e.row,"published")}}},[t._v("发布")]):t._e(),t._v(" "),"draft"!=e.row.status?i("el-button",{attrs:{size:"small"},nativeOn:{click:function(i){t.handleModifyStatus(e.row,"draft")}}},[t._v("草稿")]):t._e(),t._v(" "),"deleted"!=e.row.status?i("el-button",{attrs:{type:"danger",size:"small"},nativeOn:{click:function(i){t.deleteRow(e.row)}}},[t._v("删除")]):t._e()]}}])})],2),t._v(" "),i("el-dialog",{attrs:{title:"编辑",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:t.form,rules:t.rules,"label-position":"left","label-width":"70px"}},[i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"作者",prop:"author"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.author,callback:function(e){t.$set(t.form,"author",e)},expression:"form.author"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"页数",prop:"pageviews"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.pageviews,callback:function(e){t.$set(t.form,"pageviews",t._n(e))},expression:"form.pageviews"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"状态"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusarr,function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})}))],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),"create"==t.dialogStatus?i("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("确定")]):i("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=i("VU/8")(o,r,!1,function(t){i("siDQ")},null,null);e.default=c.exports},b5j9:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.el-form{\r\n  width: 400px;\r\n  margin-left: 50px\n}\r\n",""])},siDQ:function(t,e,i){var l=i("b5j9");"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);i("rjj0")("23cc12a2",l,!0)}});